# ğŸ“‹ TODO - ImplÃ©mentation SystÃ¨me de Badges SkyScore

## ğŸ—ï¸ PHASE 1 : FONDATIONS (Architecture de base)

### âœ… Ã‰tapes ComplÃ©tÃ©es
- [x] **Analyser l'email actuel** - Comprendre emailService.js actuel
- [x] **Plan d'amÃ©lioration dÃ©taillÃ©** - Documenter idÃ©es et impacts dans plan.md  
- [x] **Architecture badges** - Concevoir systÃ¨me modulaire pour 100 badges

### ğŸ”§ Ã‰tapes Techniques Fondamentales

#### 1. **Interface & Configuration**
- [ ] **BadgeEvaluator Interface** 
  - CrÃ©er `server/src/badges/base/BadgeEvaluator.js`
  - Template method pattern + mÃ©thode abstraite `evaluate()`
  - PropriÃ©tÃ©s: id, name, emoji, description, category, priority

- [ ] **Configuration Globale**
  - CrÃ©er `server/src/badges/config/BadgeConfig.js`
  - Seuils: NIGHT_HOURS, WORK_HOURS, VIRAL_THRESHOLD
  - Limites: MAX_BADGES_IN_EMAIL, ANALYSIS_PERIOD_DAYS

#### 2. **Data & Analytics Layers**
- [ ] **Data Collector Service**
  - CrÃ©er `server/src/services/userDataService.js`
  - MÃ©thodes mock pour MVP : collectUserData(), getProfile(), getPosts()
  - Structure donnÃ©es : profile, posts, interactions, timestamps

- [ ] **Analytics Service**  
  - CrÃ©er `server/src/services/userAnalyticsService.js`
  - Calculs mÃ©triques : totalPosts, avgPostsPerDay, hourlyDistribution
  - MÃ©triques engagement : avgLikes, followerRatio, viralPosts

## ğŸ¯ PHASE 2 : BADGES PAR CATÃ‰GORIE (100 badges)

### ğŸ“± CatÃ©gorie 1 - ActivitÃ© de Base (10 badges)
- [ ] **ActivityBadges.js** 
  - `NewbieBadge` : totalPosts < 5
  - `GhostBadge` : totalPosts === 0  
  - `SkyAddictBadge` : avgPostsPerDay > 5
  - `WeekendPosterBadge` : 80% posts weekend
  - `DailyGrinderBadge` : posts tous les jours
  - `ComebackKidBadge` : gap >30j puis reprise
  - `MidlifeCrisisBadge` : burst posts aprÃ¨s silence
  - `EchoBadge` : posts uniquement aprÃ¨s autres
  - `TimeTravelerBadge` : posts heures alÃ©atoires
  - `SkyTouristBadge` : 1 post puis jamais

### ğŸŒ™ CatÃ©gorie 2 - Habitudes Horaires (10 badges)  
- [ ] **TimeBasedBadges.js**
  - `NightOwlBadge` : 30%+ posts aprÃ¨s 23h
  - `EarlyBirdBadge` : 30%+ posts avant 7h
  - `InsomniacBadge` : plus actif nuit que jour
  - `NineToFiverBadge` : posts uniquement 9h-17h
  - `LunchBreakerBadge` : pic d'activitÃ© 12h-14h
  - `JetlaggedBadge` : posts sur 16h+ avec variance Ã©levÃ©e
  - `SunWorshipperBadge` : actif uniquement jour
  - `WeekendWarriorBadge` : 80%+ posts weekend
  - `BlueMondayBadge` : 3x plus posts lundi
  - `SiestaModeBadge` : 0 activitÃ© 14h-16h

### ğŸ“Š CatÃ©gorie 3 - Stats/Ratios (10 badges)
- [ ] **StatsBadges.js**
  - `QualityCircleBadge` : followerRatio > 1.5
  - `DesperateNetworkerBadge` : following/followers > 10
  - `LikeMagnetBadge` : avgLikes > seuil Ã©levÃ©  
  - `LoudspeakerBadge` : posts/replies ratio Ã©levÃ©
  - `CollectorBadge` : following > 1000
  - `TinyButMightyBadge` : followers < 100 mais engagement Ã©levÃ©
  - `CloutChaserBadge` : replies majoritaires Ã  gros comptes
  - `OneHitWonderBadge` : 1 post viral, autres faibles
  - `RatioLordBadge` : replies plus likÃ©es que posts
  - `MuteButtonCandidateBadge` : trop de replies

### âœï¸ CatÃ©gorie 4 - Style d'Ã‰criture (10 badges)
- [ ] **WritingStyleBadges.js**  
  - `MinimalistBadge` : avgPostLength < 50 chars
  - `EssayistBadge` : avgPostLength > 200 chars
  - `EmojiDealerBadge` : emoji dans 80%+ posts
  - `GrammarCopBadge` : 0 typos dÃ©tectÃ©es
  - `HashtagHoarderBadge` : 3+ hashtags par post
  - `LinkPusherBadge` : 50%+ posts avec liens
  - `ShitposterBadge` : contenu chaos dÃ©tectÃ©
  - `PoetBadge` : style haiku/poÃ©tique
  - `HotTakeMachineBadge` : mots controverses
  - `ThreadlordBadge` : threads frÃ©quents

### ğŸ’¬ CatÃ©gorie 5 - Interaction (10 badges)
- [ ] **InteractionBadges.js**
  - `ReplyMachineBadge` : replies > posts
  - `SilentLikerBadge` : likes sans posts/replies  
  - `CheerleaderBadge` : posts positifs/encourageants
  - `DebaterBadge` : mots argumentatifs frÃ©quents
  - `ConversationStarterBadge` : posts attirent replies
  - `WallflowerBadge` : faibles interactions
  - `HugDealerBadge` : Ã©nergie wholesome dÃ©tectÃ©e
  - `SaltyBadge` : replies conflictuelles
  - `MentionsGoblinBadge` : trop de mentions
  - `GhostedBadge` : faibles likes et replies

## ğŸ† PHASE 3 : BADGES AVANCÃ‰S & PERFORMANCE

### ğŸ­ CatÃ©gorie 6-10 (50 badges restants)
- [ ] **PerformanceBadges.js** - Viral, Celebrity, Algorithm's Pet...
- [ ] **PersonalityBadges.js** - Comedian, Philosopher, Optimist...  
- [ ] **SpecialHabitsBadges.js** - Serial Deleter, Screenshot Hoarder...
- [ ] **StreakBadges.js** - Iron Man, Consistency Champ, Burnout...
- [ ] **EasterEggBadges.js** - NPC, Florida Man, Sky Pirate...

## ğŸ”§ PHASE 4 : ORCHESTRATION & INTÃ‰GRATION

### ğŸ­ Services d'Orchestration
- [ ] **Badge Factory**
  - CrÃ©er `server/src/badges/BadgeFactory.js`
  - Instancier tous les 100 badges
  - MÃ©thodes : getAllEvaluators(), getByCategory()

- [ ] **Aggregation Service** 
  - CrÃ©er `server/src/services/badgeAggregationService.js`
  - calculateUserBadges(), selectTopBadges()
  - Algorithme de raretÃ© et prioritÃ©

- [ ] **Integration Service**
  - Mettre Ã  jour `server/src/services/skyScoreService.js`  
  - calculateSkyScoreWithBadges()
  - Retourner : score, archetype, badges, metrics

### ğŸ“§ IntÃ©gration Email
- [ ] **Template HTML**
  - Mettre Ã  jour `server/src/services/emailService.js`
  - Section badges avec emojis et descriptions
  - Design cards responsive

## ğŸ§ª PHASE 5 : TESTS & VALIDATION

### ğŸ”¬ Tests Unitaires
- [ ] **BadgeEvaluator Tests**
  - CrÃ©er `server/tests/badges/BadgeEvaluator.test.js`
  - Tester interface commune et mÃ©thodes abstraites

- [ ] **Badges ReprÃ©sentatifs**
  - Tests pour NightOwl, Ghost, ViralSpark, Philosopher
  - Mock des analytics, vÃ©rifier conditions

### ğŸ” Tests d'IntÃ©gration  
- [ ] **Flow Complet**
  - CrÃ©er `server/tests/badges/integration.test.js`
  - Mock userData â†’ Analytics â†’ Badges â†’ Email
  - VÃ©rifier performance et cohÃ©rence

### âš¡ Optimisation Finale
- [ ] **Performance Testing**
  - Tester avec datasets volumineux
  - Optimiser calculs coÃ»teux
  - Ajouter cache si nÃ©cessaire

- [ ] **Seuils & Calibration**
  - Analyser distribution des badges sur donnÃ©es rÃ©elles
  - Ajuster seuils pour Ã©quilibrer raretÃ©
  - A/B test email avec/sans badges

---

## ğŸ¯ PRIORITÃ‰S D'IMPLÃ‰MENTATION

### ğŸš€ **MVP Phase (Semaine 1)**
1. Interface BadgeEvaluator + Config  
2. Data & Analytics Services (mock)
3. 2-3 badges simples (Ghost, NightOwl, Minimalist)
4. Badge Factory basique
5. IntÃ©gration email simple

### ğŸ“ˆ **Production Phase (Semaine 2-3)**  
6. ImplÃ©menter tous les 100 badges par catÃ©gorie
7. Aggregation Service avec algorithme de sÃ©lection
8. Template HTML enrichi
9. Tests complets
10. Optimisation et calibration

### ğŸ›ï¸ **Configuration Importante**
- Commencer avec seuils conservateurs
- Logging dÃ©taillÃ© pour analyser distribution  
- Feature flags pour activer/dÃ©sactiver badges
- SystÃ¨me de versioning pour Ã©volution des conditions
